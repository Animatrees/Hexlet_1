# Симулятор распределённой системы

Этот проект моделирует распределённую систему с серверами (workers) и задачами (tasks). 
Он позволяет пользователям интерактивно управлять серверами, назначать задачи и отслеживать состояние системы. 
Система реализована на Python с использованием асинхронных возможностей.

## Возможности

- **Динамическое управление серверами:** Добавляйте сервера в систему и распределяйте задачи динамически.
- **Динамическое добавление серверов:** Вы можете добавлять новые сервера в процессе работы.
- **Очередь задач:** Не назначенные задачи сохраняются в очереди до появления доступного сервера.
- **Мониторинг состояния системы:** Отслеживайте состояние всех серверов и очереди задач.
- **Интерфейс командной строки:** Интерактивное управление с помощью набора предопределённых команд.

## Компоненты

### 1. `Task`
Представляет задачу с заданной продолжительностью в секундах.

- **Атрибуты:**
  - `duration`: Ненулевое целое число, представляющее продолжительность задачи.

### 2. `Worker`
Представляет сервер, который может выполнять задачи.

- **Атрибуты:**
  - `id`: Уникальный идентификатор сервера.
  - `dispatcher`: Менеджер, управляющий этим сервером.
  - `current_task`: Задача, которая в данный момент выполняется (если есть).
  - `remaining_time`: Время, оставшееся до завершения текущей задачи.
- **Методы:**
  - `assign_task`: Назначает задачу на сервер и запускает её выполнение.
  - `work`: Асинхронно выполняет задачи.
  - `is_available`: Проверяет, свободен ли сервер.
  - `__str__`: Описывает текущее состояние сервера.

### 3. `Dispatcher`
Управляет серверами и распределяет задачи.

- **Атрибуты:**
  - `workers`: Список серверов.
  - `line`: Очередь для не назначенных задач.
- **Методы:**
  - `add_workers`: Добавляет сервера и распределяет задачи из очереди, если это возможно.
  - `add_task`: Назначает задачи доступным серверам или добавляет их в очередь.
  - `dispatch_task`: Назначает задачи из очереди вновь доступным серверам.
  - `get_status`: Возвращает сводку о серверах и очереди задач.
  - `find_worker`: Находит следующий доступный сервер.

### 4. `IDispatcher`
Абстрактный базовый класс, определяющий интерфейс для менеджера.

- **Методы:**
  - `dispatch_task`: Абстрактный метод, который должен быть реализован в подклассах.

### 5. Утилитарные функции
- `create_dispatcher`: Возвращает новый экземпляр `Dispatcher`.
- `create_task`: Создаёт и возвращает экземпляр `Task` с заданной продолжительностью.
- `create_workers`: Создаёт указанное количество экземпляров `Worker` и связывает их с менеджером.

### 6. Контроллер
Контроллер предоставляет интерактивный CLI для симулятора.

- **Команды:**
  - `add_servers <amount>`: Добавляет указанное количество серверов менеджеру.
  - `add_task <duration>`: Создаёт задачу и назначает её серверу или добавляет в очередь.
  - `status`: Показывает статус серверов и задач.
  - `help`: Отображает список доступных команд.
  - `exit`: Выход из симулятора.

## Как запустить

1. Склонируйте репозиторий:
   ```bash
   git clone <repository-url>
   cd <repository-directory>
   ```
2. Запустите симулятор:
   ```bash
   python main.py
   ```
3. Следуйте инструкциям на экране для взаимодействия с системой.

## Пример использования

```text
Добро пожаловать в симулятор распределенной системы!

Чтобы добавить серверы в систему введите команду - add_servers <количество серверов>.
Чтобы добавить задание введите команду - add_task <длительность в сек>.
Чтобы просмотреть состояние системы введите команду - status.
Чтобы получить список доступных команд введите - help.
Чтобы выйти из программы введите команду - exit.

Ваша команда: add_servers 1
Создание серверов прошло успешно.

Ваша команда: add_task 10
Сервер 1 начал выполнение задачи.

Ваша команда: add_task 5
Нет свободных серверов. Задача добавлена в очередь.

Ваша команда: status
Состояние серверов:
Сервер 1: выполняет задание (осталось 4 сек.)
Очередь заданий: 1

Сервер 1 успешно выполнил задачу длительностью 10 сек.
Задание из очереди направлено на сервер 1.

Ваша команда: exit
Спасибо, что были с нами!)
```

## Обработка ошибок

- Неверные команды или параметры (например, нецелые значения) обрабатываются с помощью описательных сообщений об ошибках.
- Задачи и сервера должны иметь корректные, ненулевые входные данные.


## Лицензия

Этот проект лицензирован под лицензией MIT.
